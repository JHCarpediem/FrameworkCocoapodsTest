/*******************************************************************************
* Copyright (C), 2020, Lenkor Tech. Co., Ltd. All rights reserved.
* 文件说明 : 故障码
* 功能描述 : 故障码举例
* 创 建 人 : panjun        20210129
* 审 核 人 :
* 文件版本 : V1.00
* 修订记录 : 版本      修订人      修订日期      修订内容
*
*
*******************************************************************************/

#ifndef _READ_DTC_H_
#define _READ_DTC_H_

#include "DemoEnterSys.h"
#include "DemoVehicleStruct.h"
#include "StdShowMaco.h"

namespace Topdon_AD900_Demo {

	class CTroubleCode
	{
	private:
		CEnterSys* m_pSysEnter;
		vector<TROUBLECODE> m_vecTroubleCode;

	public:
		CTroubleCode();
		virtual ~CTroubleCode();

	public:
		void SetSysEnterPointer(CEnterSys* pSysEnter);

		/*-----------------------------------------------------------------------------
		功    能：	一键扫描读故障码
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		ErrorCode_t AutoScanTroubleCode();

		/*-----------------------------------------------------------------------------
		功    能：	一键扫描清除故障码
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		ErrorCode_t AutoScanClearTroubleCode();

		/*-----------------------------------------------------------------------------
		功    能：	读故障码
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		ErrorCode_t ReadTroubleCode(CBinary binSys);

		/*-----------------------------------------------------------------------------
		功    能：	读故障码
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		ErrorCode_t ClearTroubleCode();

		/*-----------------------------------------------------------------------------
		功    能：	得到故障码个数
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		uint32_t GetSysCodeNum();

		/*-----------------------------------------------------------------------------
		功    能：	得到故障码信息
		参数说明：	无
		返 回 值：	错误码
		说    明：	无
		-----------------------------------------------------------------------------*/
		vector<TROUBLECODE> GetSysCodeInfo();

		void FrzDataStream(string strPCBU);

	protected:

	public:
		void SetTroubleCodeReport(stDtcReportItem& DtcReportItem);

	};
}
#endif /*_READ_DTC_H_*/
